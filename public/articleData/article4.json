{
  "title":"for...in在ie8下不兼容",
  "type":16,
  "time":"2016/9/30 9:59",
  "content": "<p>ie8的indexOf函数不好用。原因说明及解决方法如下：</p><p>Don't use for...in for arrays. It's best to use the traditional for loop in that case.</p><p>The reason is because for...in looks at the array as an object, and therefore properties likeindexOf or length may be included in the loop. The normal for loop only deals with numeric keys,so this problem is avoided.</p><p>On a side note, unwanted properties could show up when iterating over plain objects as well(as others have noted, properties you add to the object's prototype will show up). You canget around this by writing your for...in loops this way:</p><pre class='code'><span class='key'>var</span> <span class='param'>obj</span> <span class='key'>=</span> <span class='flower'>{</span> <span class='word'>...</span> <span class='flower'>}</span><span class='word'>;</span><br><span class='key'>for</span> <span class='word'>(</span><span class='key'>var</span> <span class='param'>prop</span> <span class='key'>in</span> <span class='param'>obj</span><span class='word'>)</span> <span class='flower'>{</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class='key'>if</span><span class='word'>(</span><span class='param'>obj</span><span class='word'>.</span><span class='method'>hasOwnProperty</span><span class='word'>(</span><span class='param'>prop</span><span class='word'>))</span><span class='flower'>{</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='key'>var</span> <span class='param'>item</span> <span class='key'>=</span> <span class='param'>obj</span><span class='word'></span><span class='param'>prop</span><span class='word'>;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='word'>...</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class='flower'>}</span><br><span class='flower'>}</span></pre><p>To be clear though: you still shouldn't use this method on arrays.</p>"
}