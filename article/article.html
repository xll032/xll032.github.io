<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>文章</title>
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="../public/code.css">
    <style>
        .container{
            width:50%;
            margin:0 auto;
            min-width:600px;
        }
    </style>
</head>
<body>
    <div class="container"> <a href="../index.html">返回</a><br><a id="up" href="javascript:void(0)">上一篇</a><br><a id="down" href="javascript:void(0)">下一篇</a></div>
</body>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="../public/articleData.js"></script>
<script>
    function createContent(){
        function switchType(type){
            switch(type){
                case 1:return 'jQuery';
                case 2:return 'AngularJS';
                case 4:return 'React';
                case 8:return 'Vue';
                case 16:return '原生JS';
                case 32:return 'CSS';
                case 64:return 'HTML';
                case 128:return '微信小程序';
                case 256:return '插件';
                case 512:return '其他';
            }
        }
        function codeStyle(type,content){
            console.log(type);
            console.log(content.match(/(&lt;)([\s\S]*)(\>?)/g));
            return content;
        }
        var href = location.href;
        var id = (href.substring(href.indexOf('?')+4))>>0;
        var res = AllData[id],
                content='',
                codeShow = false;
        id==1?$('#up').text('已经是第一篇'):$('#up').attr('href','article.html?id='+(id-1));
        id==AllDataLength?$('#down').text('已经是最后一篇'):$('#down').attr('href','article.html?id='+(id+1));
        if(res == void(0)){
            document.write('404 不存在对应的页面');
            return false
        }
        for(var i=0;i < res.content.length;i++){
            var _this = res.content[i][1],
            _part = res.content[i][0];
            if(_part&&!codeShow){
                console.log(codeStyle(_part,_this));
                content += '<pre class="code">' + _this + '<br>';
                codeShow = true;
            }else if(_part&&codeShow){
                content += _this + '<br>';
            }else if(!_part&&codeShow){
                content += '</pre>'+ _this;
                codeShow = false;
            }else{
                content += '<p>' + _this + '</p>';
            }
        }
        $('.container').append(
                '<div>标题：'+res.title+'</div>' +
                '<div>分类：'+switchType(res.type)+'</div>' +
                '<div>时间：'+res.time+'</div>' +
                '<div>内容：'+content+'</div>'
               );
    }
    createContent();


</script>
</html>